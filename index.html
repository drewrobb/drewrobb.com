<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <title>drewrobb.com</title>
  <meta name="description" content />
  <meta name="viewport" content="width=device-width" />
  <link type="image/png" rel="icon" href="./images/favicon.png" />

  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./css/bootstrap.css">

  <link rel="stylesheet" type="text/css" href="./css/styles.css" />

  <script src="//code.jquery.com/jquery-1.12.4.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <meta name="viewport" content="width=device-width">
</head>
<body>
  
<div class="navbar navbar-custom">

  <div class="nav navbar-nav navbar-left">
    <a href="./#" style="display: none">
      <img class="avatar" src="./images/drew.jpg">
    </a>
  </div>
  <ul class="nav navbar-nav navbar-right">
    <li><a href="./about.html">about</a></li>
    <li><a href="http://github.com/drewrobb/drewrobb.com">source</a></li>
  </ul>
  <div class="navbar-inner">
    <div class="container">
      <div class="nav">
        <div class="page-heading">
          <a href="./#">
            <h2 style="margin-left: 10px;">Drew Robb</h2>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="navbar-background">
  </div>
</div>

<div class="container">
  <div class="col-md-9">
    
        <h2><a href="./posts/one-year-running.html">One Year of Running</a></h2>
        <p class="post-info">
            Posted on January  4, 2013
            
        </p>
        <p class="tags"><a href="./tags/running.html">running</a>, <a href="./tags/personal.html">personal</a></p>
        
            <p>About one year ago, for the first time in recent memory, I went on a run. I now have a lot of data running data! I also almost always run with a heartrate monitor.</p>
<p>The graph below represents my progress. Each point is a single run that was between 3 and 8 miles without signficant elevation gain and with a reasonably low standard deviation in pace. For each run, I calculate my mean pace over all 1 mile continuous subsections of the run where my heart rate was within the range [165, 180] (typical moderate-hard effort for me). This gives a crude measurement of the pace that I’m able to sustain at a given heart rate.</p>
<div class="figure">
<img src="./images/pace_running_regression.png" />

</div>
<p>There are only about 40 runs shown, because I don’t always have a heart rate monitor, and I’ve filtered many of the runs. A simple linear fit of the data gives a slope of ~1.68 seconds/(week * mile). I’m getting faster by almost two seconds a mile every week.</p>
        

        <h2><a href="./posts/hakyll-intro.html">Hakyll Beginnings</a></h2>
        <p class="post-info">
            Posted on January  4, 2013
            
        </p>
        <p class="tags"><a href="./tags/hakyll.html">hakyll</a>, <a href="./tags/programming.html">programming</a></p>
        
            <h3 id="compilation">Compilation:</h3>
<p>Compiling took 4.8 seconds, and the binary is 38MB!</p>
<pre><code>time ghc --make  site.hs
[1 of 1] Compiling Main             ( site.hs, site.o )
Linking site ...
ghc --make site.hs  4.28s user 0.51s system 99% cpu 4.823 total</code></pre>
<p>It turns out that ghc does static linking to hakyll and its dependencies by default. This is nice in that it creates a more portable binary, but the cost of compile time is too large. Dynamic linking can be enabled in ghc with the dynamic flag. However, cabal installed packages seem to not support this by default:</p>
<pre><code> site.hs:19:8:
     Could not find module `Hakyll'
     Perhaps you haven't installed the &quot;dyn&quot; libraries for package `hakyll-3.4.1.0'?
     Use -v to see a list of the files searched for.</code></pre>
<p>This requires a simple rebuild to support dynamic linking.</p>
<pre><code>cabal install --reinstall --enable-shared hakyll</code></pre>
<p>You might have to also reinstall other cabal dependencies, or just start over as I did.</p>
<p>Finally,</p>
<pre><code>time ghc --make  -dynamic site.hs
[1 of 1] Compiling Main             ( site.hs, site.o )
Linking site ...
ghc --make -dynamic site.hs  1.10s user 0.13s system 98% cpu 1.257 total</code></pre>
<p>It was almost 4 times faster, and the binary is now only 116kB. Success.</p>
<div class="sourceCode"><pre class="sourceCode scala"><code class="sourceCode scala"><span class="kw">val</span> processor = <span class="kw">new</span> StreamingTransform {
  <span class="kw">def</span> <span class="fu">transform</span>(record: Element) = {
    <span class="kw">val</span> id = XQueryUtil.<span class="fu">xquery</span>(record, <span class="st">&quot;IndexCatalogueID&quot;</span>).<span class="fu">get</span>(<span class="dv">0</span>)
    <span class="kw">val</span> placeResults = XQueryUtil.<span class="fu">xquery</span>(record, <span class="st">&quot;//Place&quot;</span>)
    <span class="kw">val</span> places = (<span class="dv">0</span> until placeResults.<span class="fu">size</span>) map placeResults.<span class="fu">get</span>

    <span class="fu">println</span>(id.<span class="fu">getValue</span> + <span class="st">&quot; &quot;</span> + places.<span class="fu">map</span>(_.<span class="fu">getValue</span>).<span class="fu">mkString</span>(<span class="st">&quot;, &quot;</span>))
    <span class="kw">new</span> <span class="fu">Nodes</span>()
  }
}</code></pre></div>
        

        <h2><a href="./posts/2012-05-20-road-bike.html">Road Bike Build</a></h2>
        <p class="post-info">
            Posted on May 20, 2012
            
        </p>
        <p class="tags"><a href="./tags/cycling.html">cycling</a>, <a href="./tags/hacking.html">hacking</a></p>
        
            <p>This spring I was fed up with many issues with my current road bike. The bottom bracket made an annoying click with every pedal turn and flexed big time. The shifters wouldn’t shift to all positions. I was running 7 gear shifters (functioning as 6 gear) on an 8 speed chain. The almost 20 year old carbon/aluminum frame probably isn’t super dependable.</p>
<p>I became enthralled with the idea of building my own bike around a unlabeled carbon frame from China. Most of these go for &lt;500$ and are more or less the same as name brand frames.</p>
<h3 id="frame-criteria">Frame Criteria</h3>
<ul>
<li>at least 59cm frame size, most models only go up to 56cm or 58cm</li>
<li>internal cable routing, this just looks slick</li>
<li>more or less straight lines (see pinarello, etc)</li>
<li>decently popular, I wanted some good reviews.</li>
</ul>
<p>The definitive information source for these frames are the terrible organized but comprehensie <a href="http://forums.roadbikereview.com/bikes-frames-forks/chinese-carbon-thread-ebay-direct-version-6-0-a-272806.html">forums</a> at roadbikereview.com.</p>
<p>I settled on the DengFu FM029 60cm, which is the same as the very popular FM028, but with internal cable routing. ISP was only a little bit extra, I decided to go for it since I know my saddle height. I went with a Matte 3k finish. Glossy looks better, but can get scratched and dirty easily.</p>
<div class="figure">
<img src="./images/posts/fm029geo.jpg" />

</div>
<h3 id="wheelset">Wheelset</h3>
<p>I was mostly concerned with durability. Carbon wasn’t an option because of expense, breakpad wear, and lack of need to race. ROL Volant had amazing reviews, and was rated for up to a 240 pound rider. Perfect!</p>
<h3 id="shifters">Shifters</h3>
<p>I indulged and got RED shifters, they are excellent.</p>
<h3 id="crankset">Crankset</h3>
<p>Having decided on a BB30 frame, SRAM had very few options. I found irresistable deal on a 177.5mm standard (39/53) RED crankset. The 177.5mm length should work well with my longer legs.</p>
<h3 id="cassette">Cassette</h3>
<p>With a standard crankset, I really didn’t need an 11 tooth gear. I considered the 12-32, but decided that the disadvantages of needing a mid-range deraullier cage and having wider gear spacings weren’t worth it. The 12-28 has single tooth increments from 12-17. My final <a href="http://www.gear-calculator.com/#KB=39,53&amp;RZ=12,12,13,14,15,16,17,19,22,25,28&amp;GR=DERS&amp;TF=85&amp;UF=2099&amp;SL=2">gear ratios</a>.</p>
<h2 id="the-build">The build</h2>
<p>The bike was put together in a single weekend. The most difficult part was installing fork crown race. This was mostly due to the fact that I didn’t have the proper crown race driver. After some tool improvisation and some very light sanding (the fit was extremely tight), it finally went together. The most time consuming and stressful part was cable cutting and routing. Measuring the correct cable length is very difficult. On top of this, extra cable length might be needed if you plan to adjust handlebar height later on.</p>
<h3 id="front-derailleur-cable">Front Derailleur Cable</h3>
<p>This portion of the build was difficult as there wasn’t a cable router with the bike frame. The bare metal cable going under the bottom bracket would quickly cut through the carbon. To resolve this I removed a 1 foot segment of the inner plastic tube from excess shift cable. I used rubbing alcohol to lubricate the inner cable, and then easily removed it from the coiled metal and outer tube with pliers. I positioned the tube to cover the entire cable from the defailleur to the beginning of the internal cable section, ensuring no wear or dirt will reach the cable.</p>
        


<nav aria-label="Page navigation">
  <ul class="pagination">
    
    <li class="disabled">
    
    
      <a href="#">
    
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
    
    <li class="active">
      <a href="#">1<span class="sr-only">current</span></a>
    </li>
    
    
    <li class="disabled">
    
    
      <a href="#">
    
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ui>
</nav>

  </div>
  <div class="col-md-3">
    <h3>Recent posts</h3>
    <ul class="recent-posts">
      
        <li><a href="./posts/one-year-running.html">One Year of Running</a></li>
      
        <li><a href="./posts/hakyll-intro.html">Hakyll Beginnings</a></li>
      
        <li><a href="./posts/2012-05-20-road-bike.html">Road Bike Build</a></li>
      
    </ul>
    <h3>Tag</h3>
    <a style="font-size: 75%" href="./tags/cycling.html">cycling</a> <a style="font-size: 75%" href="./tags/hacking.html">hacking</a> <a style="font-size: 75%" href="./tags/hakyll.html">hakyll</a> <a style="font-size: 75%" href="./tags/personal.html">personal</a> <a style="font-size: 75%" href="./tags/programming.html">programming</a> <a style="font-size: 75%" href="./tags/running.html">running</a>
  </div>
</div>



  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-41701342-1', 'drewrobb.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
